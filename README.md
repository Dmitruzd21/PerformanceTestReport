# **Performance Test Report**

**Ссылка на задание/требования:** https://github.com/netology-code/loadqa-homeworks/blob/main/5.Metrics/homework_lecture5.md

## **Ссылки на предыдущие работы:**

- Сбор информации и создание профиля нагрузки: https://github.com/Dmitruzd21/IntroductionToPerformanceTesting
- Мониторинг:

https://github.com/Dmitruzd21/telegraf

https://github.com/Dmitruzd21/prometheus

- Проведение нагрузочного тестирования WEB: https://github.com/Dmitruzd21/JMeterAndBlazeMeter
- Проведение нагрузочного тестирования DB: https://github.com/Dmitruzd21/LoadDB

## **Краткое описание**

Данный отчет представляет итоги проведения тестирования производительности сервиса бронирования билетов (нагрузочное тестирование), а также сервиса WordPress c постами и комментариями (объемное тестирование).

## **Задачи**

В рамках тетстирования производительности было несколько задач:

- Провести прогноз количества посетителей сервиса бронирования билетов при увеличении количества кинотеатров в разных городах

- Создать профиль нагрузочного тестирования

- Определить параметры тестовой среды исходя из среды, на которой расположен сервис бронирования билетов

- Провести нагрузочное тестирование сервиса бронирования билетов

- Провести объемное тестирование СУБД сервиса WordPress c постами и комментариями

- Провести параллельное объемное и нагрузочное тестирование сервиса WordPress с постами и комментариями

- Оценить состояние базовых параметров оборудования/ОС при проведении нагрузочного тетстирования

## **Используемые инструменты (ПО)**

- Для нагрузочного тетсирования: JMeter и BlazeMeter

- Для объемного тестирования: JMeter

- Для мониторинга системы: Telegraph + InfluxDB + Grafana и node-exporter + prometheu + Grafana

## **Ожидаемое количество посетителей сервиса бронирования билетов**

| Параметры                                                   | Результаты                                                                                                                            |
| ----------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| Количество посетителей в сутки во всех кинотеатрах          | Ожидается 2 003 посетителей в сутки во все кинотеатры сети, если предположить, что в будние и в выходные дни посещаемость одинаковая. |
| Количество посетителей в выходные дни                       | Посещаемость в выходные дни обычно увеличивается в 2 раза, таким образом, количество посетителей может возрасти до 4 006 в сутки.     |
| Влияение того, что города находятся в разных часовых поясах | В выходные дни с 10 до 13 по московскому времени совпадают пики посещаемости в Москве и во Владивостоке!!!                            |
| Ожидаемое количество посетителей на сайте в выходной день   | Гостей - 1 602, Покупатели онлайн - 2 603, Продавец - 1 402, Администратор - 15                                                       |

## **Тестовая среда**

| Параметры               | Значения          |
| ----------------------- | ----------------- |
| Особенности сервера     | Выделенный сервер |
| Количество серверов     | Один              |
| CPU - количество ядер   | 8 ядер            |
| RAM                     | 64 Гб             |
| Disk SSD                | Один Тб           |
| Поправочный коэффициент | 2                 |

**Примечание:** тестирование выполнялось на ПК

# **Результаты профиля нагрузочного тестирования**

| Параметры                                                                                        | Значения                                                                                       |
| ------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------- |
| Роли                                                                                             | Гость (2 сценария), Покупатель (3 сценария), Продавец (1 сценирий), Администратор (1 сценарий) |
| Общее количество сценариев                                                                       | 7                                                                                              |
| Интервал, сек                                                                                    | 3600                                                                                           |
| Суммарное количество потоков(пользователей) за измеряемый интервал времени, выполняющих сценарий | 469                                                                                            |
| Общее количество запросов за интервал                                                            | 2 952                                                                                          |
| RPS                                                                                              | 53,73                                                                                          |
| RPS с учетом поправочного коэффициента                                                           | 26,8                                                                                           |

## **Результаты нагрузочного тестирования сервиса бронирования билетов**

**Примечание:** упрощение в том, что прогоняется один сценарий (покупка билета в кинотеатре и получение QR кода)

**Результаты при заданной(оптимальной) нагрузке с учетом рассчитанного количества посетителей сервиса**

RPS c учетом поправочного коэффициента: 26,8

**Выводы:**

**Результыты выявления предела нагрузки (постепенное возрастание нагрузки выше расчитанного RPS)**

Критерии предела нагрузки:

- Появление ответов с кодами ошибок
- Длительное время ответа на запросы:

**Выводы:**

## **Результаты объемного тестирования СУБД сервиса WordPress c постами и комментариями**

**Выводы:**

- Подтверждено, что в СУБД может быть создано 552 576 записей с комментариями

- Количество строк в таблице wp_comments не влияет на время отклика

## **Результаты параллельного объемного и нагрузочного тестирования сервиса WordPress с постами и комментариями**

**Выводы:**

- Если в таблице появляется около 9 694 записей, то пользователи будут ожидать загрузку страницы с комментариями более/равно 20 сек.

- Если в таблице появляется около 36 592 записей, то пользователи не смогут добавить комментарий в графическом интерфейсе.

## **Результаты мониторинга системы при выполнении объемного тестирования**

Прараметры нагрузочного тестирования (пиковые, по данным JMeter):

**Выводы:**

## **Рекомендации для сервиса бронирования билетов**

ззз

## **Рекомендации для сервиса WordPress**

- Рекомендуется контролировать количество комментариев к одному посту. Не более 10 000 комментариев. Возможно переодическое удаление старых комментариев, если общее количество комментариев приближается к 9000. Также возможно оптимизация взаимодействия ПО бэкенда с СУБД. После оптимизации необходимо повторно провести параллельное объемное и WEB тестирование.

- При текущем состоянии строго не рекомендуется хранить более 35 000 комментариев к посту, поскольку это приведет к невозможности добавлять новые комментарии.
